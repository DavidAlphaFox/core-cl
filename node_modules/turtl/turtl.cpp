#include <node.h>
#include "nan.h"
#include "turtl.h"

using namespace v8;

NAN_METHOD(StartLisp) {
	turtl_init();
}

NAN_METHOD(StopLisp) {
	turtl_shutdown();
}

NAN_METHOD(SetMsgCallback) {
	NanScope();
}

NAN_METHOD(SendMsgLisp) {
	NanScope();
}

void RegisterModule(Handle<Object> exports)
{
	exports->Set(NanSymbol("start"),
			FunctionTemplate::New(StartLisp)->GetFunction());
	exports->Set(NanSymbol("stop"),
			FunctionTemplate::New(StopLisp)->GetFunction());
	exports->Set(NanSymbol("set_msg_callback"),
			FunctionTemplate::New(SetMsgCallback)->GetFunction());
	exports->Set(NanSymbol("send_msg_lisp"),
			FunctionTemplate::New(SendMsgLisp)->GetFunction());
}

NODE_MODULE(turtl, RegisterModule);

